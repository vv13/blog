---
layout: 'post'
title: 'macOS 系统重装的准备'
date: '2020-08-02'
update_date: '2021-03-16'
tags: ['笔记']
---
## 前言

之前系统使用时间长了导致许多系统遗留文件，导致磁盘空间十分难释放出来，且网络设置出了一些问题，因此在周末的时候重装了一次系统，由于过程太过心酸，在此总结成文，希望下次能更轻松些。

## 重装系统之前的一些准备工作

1. 备份当前一安装软件信息，系统软件：`ls /Applications`，npm 全局包：`npm list -g --depth=0`
2. 备份浏览器书签
3. 备份系统文档文件夹
4. 备份系统应用配置，需要配置的应用：Vim、Itemrs、VSCode、SwitchyOmega
5. 检测当前软件的账号信息，看自己是否有遗忘，Web 应用推荐使用 LastPass 进行记录

 在国内网路环境会收到一些限制，请优先安装相关网络代理工具。

### 备份代码仓库

通常在备份代码仓库之前，尤其是前端工程师，一定需要先将 node_modules 删除了再备份，否则会导致碎片化文件过多，十分耗时，因此我写了一个小工具，首先进入到需要清理 node_modules 文件的根目录，然后执行：

```
$ npx cleanup-node-modules
```

命令会递归的清理掉所有根目录之下的 node_modules 文件夹。

## 应用软件
软件推荐请参考另一片文章。

## 环境修改

### 关闭 Homebrew 自动更新

```jsx
echo "export HOMEBREW_NO_AUTO_UPDATE=true" >> ~/.zshrc
```

### 打开 VSCode Vim 按键重复

```jsx
$ defaults write com.microsoft.VSCode ApplePressAndHoldEnabled -bool false         # For VS Code
$ defaults write com.microsoft.VSCodeInsiders ApplePressAndHoldEnabled -bool false # For VS Code Insider
$ defaults write com.visualstudio.code.oss ApplePressAndHoldEnabled -bool false    # For VS Codium
$ defaults delete -g ApplePressAndHoldEnabled
```

## brew 相关服务
### mysql-client
由于我喜欢使用 docker 来管理本地的 mysql，所以单独安装了 mysql-client，在很多场景中它是必不可少的。
```
brew install mysql-client
echo 'export PATH="/usr/local/opt/mysql-client/bin:$PATH"' >> ~/.zshrc
```

然后打开键盘偏好设置，修改按键重复与延时的时间，详情参与[此文档](https://marketplace.visualstudio.com/items?itemName=vscodevim.vim)。
