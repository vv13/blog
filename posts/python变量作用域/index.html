<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="vv13">
    <meta name="description" content="vv13&#39;s personal website">
    <meta name="keywords" content="blog,developer,personal">

    <base href="https://vv13.cn">
    <title>
  python变量作用域 · 🤪
</title>

    <link rel="canonical" href="https://vv13.cn/posts/python%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F/">

    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="https://vv13.cn/css/style.min.css">

    

    

    <link rel="icon" type="image/png" href="https://vv13.cn/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://vv13.cn/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.36" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://vv13.cn">
      🤪
    </a>
    
    <ul class="navigation-list  float-right ">
      
      <li class="navigation-item">
        <a class="navigation-link" href="https://vv13.cn/posts/">Blog</a>
      </li>
      
      <li class="navigation-item">
        <a class="navigation-link" href="https://vv13.cn/about/">About</a>
      </li>
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">python变量作用域</h1>
      <h2 class="date">December 25, 2016</h2>

      
    </header>

    

<p>class比作整个屋子，def为卧室，class外面的部分就是小区环境。</p>

<h4 id="首先测试房子-class-与公共设施变量-globals-之间的关系">首先测试房子(class)与公共设施变量(globals)之间的关系</h4>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># encoding: utf-8

PUBLIC_FACILITIES = u&#34;公共厕所&#34;

class House():
    print PUBLIC_FACILITIES
    PUBLIC_FACILITIES = &#39;改造&#39;

if __name__ == &#39;__main__&#39;:
    test = House()
    print PUBLIC_FACILITIES</pre></div>
<p>测试结果：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">公共厕所
公共厕所

***Repl Closed***</pre></div>
<p>房屋的拥有者可以使用小区内的公共设施。由此可知class内部可以访问外部的变量，但不能进行修改，在class中执行改造命令的效果就是新建了一个类局部变量变量，在访问域中覆盖了全局变量的访问域。</p>

<h4 id="测试房子-class-与房间-def-的关系">测试房子(class)与房间(def)的关系</h4>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># encoding: utf-8

class House():
    SOFA = u&#39;真皮沙发&#39;
    def room(self):
        # print SOFA # 无法直接访问外部变量，取消注释会报错
        print self.SOFA
        self.SOFA = &#39;布质沙发&#39;


if __name__ == &#39;__main__&#39;:
    test = House()
    test.room()
    print test.SOFA, House.SOFA</pre></div>
<p>测试结果：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">真皮沙发
布质沙发 真皮沙发

***Repl Closed***</pre></div>
<p>大家可以理解这样一个现象：无法将客厅的沙发放到卧室(卧室太小)，只能重新订制一个沙发，或是在客厅里去使用。当def方法中不存在与class类相同名称的变量时，def方法体中可以通过self访问到class的类变量， 但是当执行self.SOFA = Something时，新建了一个变量实例变量，并没有修改到class中的类变量， 而变量的搜索时先从局部变量进行查找，如果没有找到再查找全局变量，所有说局部变量优先访问到。</p>

<h4 id="总结">总结</h4>

<p>用python写class时务必区分类变量、实例变量、全局变量，  访问全局变量须申明<code>global variable</code>， 访问类变量要接上类名，如<code>class_name.variable</code>, 还需要注意的时while、for、try语句并不具有独立的命名空间，这与java的规则是不一样的。</p>

  </article>

  <br/>

  
  
</section>

      </div>

      <footer class="footer">
  <section class="container">
     © 2018  
  </section>
</footer>

    </main>

    

  </body>

</html>
